<Window x:Class="PersonalAiAssistant.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings - Personal AI Assistant" Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#2D3748" Padding="15">
            <TextBlock Text="Settings" FontSize="18" FontWeight="Bold" Foreground="White"/>
        </Border>
        
        <!-- Content -->
        <TabControl Grid.Row="1" Margin="10">
            
            <!-- Voice Settings Tab -->
            <TabItem Header="Voice Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        
                        <!-- Wake Word Section -->
                        <GroupBox Header="Wake Word Detection" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Label Grid.Column="0" Content="Wake Word:" Width="120"/>
                                    <TextBox Grid.Column="1" x:Name="WakeWordTextBox" Text="Assistant" Margin="5,0"/>
                                    <Button Grid.Column="2" Content="Test" Click="TestWakeWordButton_Click" Padding="10,5"/>
                                </Grid>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <TextBlock Text="Status:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <Ellipse x:Name="WakeWordStatusIndicator" Width="12" Height="12" Fill="#E53E3E" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBlock x:Name="WakeWordStatusText" Text="Not Initialized" VerticalAlignment="Center"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                        
                        <!-- STT Section -->
                        <GroupBox Header="Speech-to-Text (STT)" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Label Grid.Column="0" Content="Model Path:" Width="120"/>
                                    <TextBox Grid.Column="1" x:Name="STTModelPathTextBox" Text="Models/vosk-model-small-en-us-0.15" Margin="5,0"/>
                                    <Button Grid.Column="2" Content="Browse" Click="BrowseSTTModelButton_Click" Padding="10,5"/>
                                </Grid>
                                
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Label Grid.Column="0" Content="Sample Rate:" Width="120"/>
                                    <TextBox Grid.Column="1" x:Name="SampleRateTextBox" Text="16000" Margin="5,0"/>
                                    <Label Grid.Column="2" Content="Hz" Margin="5,0,0,0"/>
                                </Grid>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <Button Content="Download Vosk Model" Click="DownloadVoskModelButton_Click" Margin="0,0,10,0"/>
                                    <Button Content="Test STT" Click="TestSTTButton_Click"/>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <TextBlock Text="Status:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <Ellipse x:Name="STTStatusIndicator" Width="12" Height="12" Fill="#E53E3E" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBlock x:Name="STTStatusText" Text="Model Not Found" VerticalAlignment="Center"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                        
                        <!-- TTS Section -->
                        <GroupBox Header="Text-to-Speech (TTS)" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Label Grid.Column="0" Content="Kokoro Server:" Width="120"/>
                                    <TextBox Grid.Column="1" x:Name="KokoroServerTextBox" Text="http://localhost:8020" Margin="5,0"/>
                                    <Button Grid.Column="2" Content="Test" Click="TestTTSButton_Click" Padding="10,5"/>
                                </Grid>
                                
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Label Grid.Column="0" Content="Voice:" Width="120"/>
                                    <ComboBox Grid.Column="1" x:Name="VoiceComboBox" Margin="5,0"/>
                                </Grid>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <Button Content="Setup Kokoro Server" Click="SetupKokoroButton_Click" Margin="0,0,10,0"/>
                                    <Button Content="Start Server" Click="StartKokoroServerButton_Click" Margin="0,0,10,0"/>
                                    <Button Content="Stop Server" Click="StopKokoroServerButton_Click"/>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <TextBlock Text="Status:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <Ellipse x:Name="TTSStatusIndicator" Width="12" Height="12" Fill="#E53E3E" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBlock x:Name="TTSStatusText" Text="Server Not Running" VerticalAlignment="Center"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- LLM Settings Tab -->
            <TabItem Header="LLM Settings">
                <StackPanel Margin="20">
                    
                    <GroupBox Header="Language Model Provider" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="Provider:" Width="120"/>
                                <ComboBox Grid.Column="1" x:Name="LLMProviderComboBox" Margin="5,0">
                                    <ComboBoxItem Content="Google Gemini" IsSelected="True"/>
                                    <ComboBoxItem Content="Groq"/>
                                </ComboBox>
                            </Grid>
                            
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="API Key:" Width="120"/>
                                <PasswordBox Grid.Column="1" x:Name="APIKeyPasswordBox" Margin="5,0"/>
                                <Button Grid.Column="2" Content="Test" Click="TestLLMButton_Click" Padding="10,5"/>
                            </Grid>
                            
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="Max Tokens:" Width="120"/>
                                <TextBox Grid.Column="1" x:Name="MaxTokensTextBox" Text="1000" Margin="5,0"/>
                            </Grid>
                            
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="Temperature:" Width="120"/>
                                <Slider Grid.Column="1" x:Name="TemperatureSlider" Minimum="0" Maximum="1" Value="0.7" 
                                        TickFrequency="0.1" IsSnapToTickEnabled="True" Margin="5,0"/>
                            </Grid>
                            
                            <TextBlock Text="{Binding ElementName=TemperatureSlider, Path=Value, StringFormat='Temperature: {0:F1}'}"
                                     HorizontalAlignment="Right" Margin="0,5,0,0"/>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </TabItem>
            
            <!-- Microsoft Account Tab -->
            <TabItem Header="Microsoft Account">
                <StackPanel Margin="20">
                    
                    <GroupBox Header="Microsoft To-Do Integration" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="Status:" Width="120"/>
                                <TextBlock Grid.Column="1" x:Name="MicrosoftAccountStatus" Text="Not signed in" 
                                         VerticalAlignment="Center" Margin="5,0"/>
                            </Grid>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                <Button x:Name="SignInButton" Content="Sign in with Microsoft" Click="SignInButton_Click" Margin="0,0,10,0"/>
                                <Button x:Name="SignOutButton" Content="Sign Out" Click="SignOutButton_Click" IsEnabled="False"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </TabItem>
            
            <!-- Prayer Times Tab -->
            <TabItem Header="Prayer Times">
                <StackPanel Margin="20">
                    
                    <GroupBox Header="Location Settings" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <Label Grid.Row="0" Grid.Column="0" Content="City:" Width="120"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="CityTextBox" Margin="5,0,0,5"/>
                                
                                <Label Grid.Row="1" Grid.Column="0" Content="Country:" Width="120"/>
                                <TextBox Grid.Row="1" Grid.Column="1" x:Name="CountryTextBox" Margin="5,0,0,5"/>
                                
                                <Label Grid.Row="2" Grid.Column="0" Content="Latitude:" Width="120"/>
                                <TextBox Grid.Row="2" Grid.Column="1" x:Name="LatitudeTextBox" Margin="5,0,0,5"/>
                                
                                <Label Grid.Row="3" Grid.Column="0" Content="Longitude:" Width="120"/>
                                <TextBox Grid.Row="3" Grid.Column="1" x:Name="LongitudeTextBox" Margin="5,0,0,5"/>
                            </Grid>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <Button Content="Auto-detect Location" Click="AutoDetectLocationButton_Click" Margin="0,0,10,0"/>
                                <Button Content="Test Prayer Times" Click="TestPrayerTimesButton_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>
                    
                    <GroupBox Header="Notification Settings" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <CheckBox x:Name="EnableNotificationsCheckBox" Content="Enable prayer time notifications" IsChecked="True" Margin="0,0,0,10"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="Notify before:" Width="120"/>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="5,0">
                                    <TextBox x:Name="NotificationMinutesTextBox" Text="5" Width="50"/>
                                    <Label Content="minutes" Margin="5,0,0,0"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </TabItem>
            
            <!-- ActivityWatch Tab -->
            <TabItem Header="ActivityWatch">
                <StackPanel Margin="20">
                    
                    <GroupBox Header="ActivityWatch Integration" Margin="0,0,0,15">
                        <StackPanel Margin="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Grid.Column="0" Content="Server URL:" Width="120"/>
                                <TextBox Grid.Column="1" x:Name="ActivityWatchServerTextBox" Text="http://localhost:5600" Margin="5,0"/>
                                <Button Grid.Column="2" Content="Test" Click="TestActivityWatchButton_Click" Padding="10,5"/>
                            </Grid>
                            
                            <CheckBox x:Name="EnableActivityTrackingCheckBox" Content="Enable activity tracking" IsChecked="True" Margin="0,15,0,0"/>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                <TextBlock Text="Status:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <Ellipse x:Name="ActivityWatchStatusIndicator" Width="12" Height="12" Fill="#E53E3E" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                <TextBlock x:Name="ActivityWatchStatusText" Text="Not Connected" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </TabItem>
            
        </TabControl>
        
        <!-- Footer Buttons -->
        <Border Grid.Row="2" Background="#F7FAFC" Padding="15" BorderBrush="#E2E8F0" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Save" Click="SaveButton_Click" Margin="0,0,10,0" Padding="15,5"/>
                <Button Content="Cancel" Click="CancelButton_Click" Padding="15,5"/>
            </StackPanel>
        </Border>
        
    </Grid>
</Window>